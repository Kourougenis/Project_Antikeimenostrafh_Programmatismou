<!DOCTYPE html>
<html lang="el">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Î¤ÏÎ±Ï€ÎµÎ¶Î¹ÎºÏŒ Î£ÏÏƒÏ„Î·Î¼Î±</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(to right, #f5f7fa, #c3cfe2);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .container {
        width: 95%;
        max-width: 600px;
        background: white;
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      h2 {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 1.5rem;
      }

      .screen {
        display: none;
        flex-direction: column;
        gap: 1rem;
      }

      .screen.active {
        display: flex;
      }

      input,
      button,
      select {
        font-size: 1.2rem;
        padding: 0.7rem;
        border: 1px solid #ccc;
        border-radius: 8px;
      }

      button {
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      button:hover {
        background-color: #0056b3;
      }

      .actions {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .password-container {
        position: relative;
        display: flex;
        align-items: center;
      }

      .password-container input {
        flex: 1;
      }

      .toggle-password {
        position: absolute;
        right: 10px;
        background: none;
        border: none;
        font-size: 1.2rem;
        cursor: pointer;
        color: #007bff;
      }

      @media (max-width: 600px) {
        h2 {
          font-size: 1.5rem;
        }

        input,
        button,
        select {
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Î¤ÏÎ±Ï€ÎµÎ¶Î¹ÎºÏŒ Î£ÏÏƒÏ„Î·Î¼Î±</h2>
      <div id="loginScreen" class="screen active">
        <input type="text" id="loginHolder" placeholder="ÎŒÎ½Î¿Î¼Î± ÎšÎ±Ï„ÏŒÏ‡Î¿Ï…" />
        <div class="password-container">
          <input
            type="password"
            id="loginPassword"
            placeholder="ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ Î ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚"
          />
          <button
            class="toggle-password"
            onclick="togglePassword('loginPassword')"
          >
            ğŸ‘ï¸
          </button>
        </div>
        <button onclick="login()">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚</button>
        <button onclick="showCreateAccount()">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï</button>
      </div>

      <div id="createScreen" class="screen">
        <input
          type="text"
          id="createNumber"
          placeholder="Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï"
          readonly
        />
        <input
          type="text"
          id="createHolder"
          placeholder="ÎšÎ±Ï„ÏŒÏ‡Î¿Ï… Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï"
        />
        <div class="password-container">
          <input
            type="password"
            id="createPassword"
            placeholder="ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ Î ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚"
          />
          <button
            class="toggle-password"
            onclick="togglePassword('createPassword')"
          >
            ğŸ‘ï¸
          </button>
        </div>
        <input type="number" id="createBalance" placeholder="Î‘ÏÏ‡Î¹ÎºÏŒ Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿" />
        <div class="actions">
          <button onclick="createAccount()">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±</button>
          <button onclick="goBack('createScreen')">Î Î¯ÏƒÏ‰</button>
        </div>
      </div>

      <div id="menuScreen" class="screen">
        <div class="actions">
          <button onclick="showScreen('depositScreen')">ÎšÎ±Ï„Î¬Î¸ÎµÏƒÎ·</button>
          <button onclick="showScreen('withdrawScreen')">Î‘Î½Î¬Î»Î·ÏˆÎ·</button>
          <button onclick="showScreen('transferScreen')">ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬</button>
          <button onclick="displayAccount()">Î ÏÎ¿Î²Î¿Î»Î® Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï</button>
          <button onclick="logout()">Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·</button>
        </div>
      </div>

      <div id="depositScreen" class="screen">
        <input type="number" id="depositAmount" placeholder="Î Î¿ÏƒÏŒ ÎšÎ±Ï„Î¬Î¸ÎµÏƒÎ·Ï‚" />
        <div class="actions">
          <button onclick="deposit()">ÎšÎ±Ï„Î¬Î¸ÎµÏƒÎ·</button>
          <button onclick="goBack('depositScreen')">Î Î¯ÏƒÏ‰</button>
        </div>
      </div>

      <div id="withdrawScreen" class="screen">
        <input type="number" id="withdrawAmount" placeholder="Î Î¿ÏƒÏŒ Î‘Î½Î¬Î»Î·ÏˆÎ·Ï‚" />
        <div class="actions">
          <button onclick="withdraw()">Î‘Î½Î¬Î»Î·ÏˆÎ·</button>
          <button onclick="goBack('withdrawScreen')">Î Î¯ÏƒÏ‰</button>
        </div>
      </div>

      <div id="transferScreen" class="screen">
        <input
          type="text"
          id="transferTo"
          placeholder="Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï Î Î±ÏÎ±Î»Î®Ï€Ï„Î·"
        />
        <input type="number" id="transferAmount" placeholder="Î Î¿ÏƒÏŒ ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬Ï‚" />
        <div class="actions">
          <button onclick="transfer()">ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬</button>
          <button onclick="goBack('transferScreen')">Î Î¯ÏƒÏ‰</button>
        </div>
      </div>

      <div id="accountInfo" class="screen">
        <div id="accountDetails"></div>
        <button onclick="goBack('accountInfo')">Î Î¯ÏƒÏ‰</button>
      </div>
    </div>

    <script>
      let accounts = JSON.parse(localStorage.getItem("accounts") || "[]");
      let currentAccount = null;

      function saveAccounts() {
        localStorage.setItem("accounts", JSON.stringify(accounts));
      }

      function showScreen(screenId) {
        document
          .querySelectorAll(".screen")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(screenId).classList.add("active");
      }

      function clearInputs(screenId) {
        document.querySelectorAll(`#${screenId} input`).forEach((input) => {
          if (!input.hasAttribute("readonly")) input.value = "";
        });
      }

      function goBack(fromScreen) {
        clearInputs(fromScreen);
        if (fromScreen === "createScreen" || !currentAccount) {
          currentAccount = null;
          showScreen("loginScreen");
        } else {
          showScreen("menuScreen");
        }
      }

      function login() {
        const holder = document.getElementById("loginHolder").value.trim();
        const password = document.getElementById("loginPassword").value.trim();
        const acc = accounts.find(
          (a) => a.holder === holder && a.password === password
        );
        if (acc) {
          currentAccount = acc;
          showScreen("menuScreen");
          clearInputs("loginScreen");
        } else {
          alert("Î›Î¬Î¸Î¿Ï‚ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±!");
        }
      }

      function showCreateAccount() {
        document.getElementById("createNumber").value = generateAccountNumber();
        clearInputs("createScreen");
        showScreen("createScreen");
      }

      function generateAccountNumber() {
        const randomPart = () => Math.floor(1000 + Math.random() * 9000);
        return `GR ${randomPart()}-${randomPart()}-${randomPart()}`;
      }

      function isValidPassword(pw) {
        const regex =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+=\-{};':"\\|,.<>\/?]).{10,}$/;
        return regex.test(pw);
      }

      function createAccount() {
        const number = document.getElementById("createNumber").value.trim();
        const holder = document.getElementById("createHolder").value.trim();
        const password = document.getElementById("createPassword").value.trim();
        const balanceInput = document
          .getElementById("createBalance")
          .value.trim();
        const balance = parseFloat(balanceInput);

        if (!number || !holder || !password || isNaN(balance) || balance < 0) {
          alert("Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÏƒÏ‰ÏƒÏ„Î¬ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î±!");
          return;
        }

        if (!isValidPassword(password)) {
          alert(
            "ÎŸ ÎºÏ‰Î´Î¹ÎºÏŒÏ‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ 10 Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚, Ï€ÎµÎ¶Î¬, ÎºÎµÏ†Î±Î»Î±Î¯Î±, Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚ ÎºÎ±Î¹ Î­Î½Î± ÎµÎ¹Î´Î¹ÎºÏŒ ÏƒÏÎ¼Î²Î¿Î»Î¿."
          );
          return;
        }

        if (accounts.some((a) => a.number === number)) {
          alert("ÎŸ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒÏ‚ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î·!");
          return;
        }

        accounts.push({ number, holder, password, balance });
        saveAccounts();
        alert("ÎŸ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒÏ‚ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ!");
        goBack("createScreen");
      }

      function deposit() {
        const amount = parseFloat(
          document.getElementById("depositAmount").value
        );
        if (amount > 0) {
          currentAccount.balance += amount;
          saveAccounts();
          alert("Î•Ï€Î¹Ï„Ï…Ï‡Î®Ï‚ ÎºÎ±Ï„Î¬Î¸ÎµÏƒÎ·.");
          goBack("depositScreen");
        }
      }

      function withdraw() {
        const amount = parseFloat(
          document.getElementById("withdrawAmount").value
        );
        if (amount > 0 && amount <= currentAccount.balance) {
          currentAccount.balance -= amount;
          saveAccounts();
          alert("Î•Ï€Î¹Ï„Ï…Ï‡Î®Ï‚ Î±Î½Î¬Î»Î·ÏˆÎ·.");
          goBack("withdrawScreen");
        } else {
          alert("Î‘Î½ÎµÏ€Î±ÏÎºÎ­Ï‚ Ï…Ï€ÏŒÎ»Î¿Î¹Ï€Î¿ Î® Î¼Î· Î­Î³ÎºÏ…ÏÎ¿ Ï€Î¿ÏƒÏŒ.");
        }
      }

      function transfer() {
        const to = document.getElementById("transferTo").value.trim();
        const amount = parseFloat(
          document.getElementById("transferAmount").value
        );
        const recipient = accounts.find((a) => a.number === to);
        if (recipient && amount > 0 && amount <= currentAccount.balance) {
          currentAccount.balance -= amount;
          recipient.balance += amount;
          saveAccounts();
          alert("Î•Ï€Î¹Ï„Ï…Ï‡Î®Ï‚ Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬.");
          goBack("transferScreen");
        } else {
          alert("Î£Ï†Î¬Î»Î¼Î± ÏƒÏ„Î· Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬.");
        }
      }

      function displayAccount() {
        const info = `Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚: ${currentAccount.number}<br>ÎšÎ±Ï„ÏŒÏ‡Î¿Ï‚: ${
          currentAccount.holder
        }<br>Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿: â‚¬${currentAccount.balance.toFixed(2)}`;
        document.getElementById("accountDetails").innerHTML = info;
        showScreen("accountInfo");
      }

      function logout() {
        currentAccount = null;
        showScreen("loginScreen");
        clearInputs("loginScreen");
      }

      function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        input.type = input.type === "password" ? "text" : "password";
      }
    </script>
  </body>
</html>
